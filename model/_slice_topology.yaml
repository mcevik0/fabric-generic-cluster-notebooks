# Topology Summary (Auto-Generated)
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
# Total Nodes: 3
# Total Networks: 2
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
#ðŸ“¸ Node: lc-1
#  â”œâ”€ System:
#      â€¢ OS: default_rocky_9
#      â€¢ CPU: 4 vCPU
#      â€¢ RAM: 32 GB
#      â€¢ Disk: 100 GB
#      â€¢ Persistent Storage: {FABRIC_Staff_1T: 1000GB}
#  â”œâ”€ GPUs:
#    â””â”€ rtx6000 (GPU_RTX6000)
#  â”œâ”€ FPGA: fpga1 (FPGA_Xilinx_U280)
#    â””â”€ Interface: iface1, Binding: net_local_1, IPv4: 
#    â””â”€ Interface: iface2, Binding: net_local_2, IPv4: 
#  â”œâ”€ NVMe Storage:
#    â””â”€ nvme1 (NVME_P4510)
#  â”œâ”€ DPU: dpu1 (NIC_ConnectX_7_100)
#    â””â”€ Interface: iface1, Binding: net_local_1, IPv4: 192.168.201.200/24
#    â””â”€ Interface: iface2, Binding: , IPv4: 
#  â”œâ”€ NIC: nic1 (NIC_Basic)
#    â””â”€ Interface: iface1, Binding: net_local_1, IPv4: 192.168.201.211/24
#  â”œâ”€ NIC: nic2 (NIC_ConnectX_6)
#    â””â”€ Interface: iface1, Binding: net_local_2, IPv4: 192.168.202.211/24
#    â””â”€ Interface: iface2, Binding: , IPv4: 
#  â”œâ”€ OpenStack Roles: control, network, storage
#
#ðŸ“¸ Node: lc-2
#  â”œâ”€ System:
#      â€¢ OS: default_rocky_9
#      â€¢ CPU: 2 vCPU
#      â€¢ RAM: 8 GB
#      â€¢ Disk: 10 GB
#      â€¢ Persistent Storage: {}
#  â”œâ”€ NIC: nic1 (NIC_Basic)
#    â””â”€ Interface: iface1, Binding: net_local_1, IPv4: 192.168.201.212/24
#  â”œâ”€ OpenStack Roles: compute
#
#ðŸ“¸ Node: lc-3
#  â”œâ”€ System:
#      â€¢ OS: default_rocky_9
#      â€¢ CPU: 2 vCPU
#      â€¢ RAM: 8 GB
#      â€¢ Disk: 10 GB
#      â€¢ Persistent Storage: {}
#  â”œâ”€ OpenStack Roles: compute
#
#
# Network Summary
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ðŸ“¡ net_local_1
#    Type: L2Bridge
#    Subnet: IPv4: 192.168.201.0/24
#    Gateway: IPv4: 192.168.201.1
#    Connected Nodes: 2
#
# ðŸ“¡ net_local_2
#    Type: L2Bridge
#    Subnet: IPv4: 192.168.202.0/24, IPv6: 2001:db8:1234:1::/64
#    Gateway: IPv4: 192.168.202.1, IPv6: 2001:db8:1234:1::1
#    Connected Nodes: 1
#
# ASCII Topology Diagram
#â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Network: net_local_1
#    â””â”€â”€ lc-1  (192.168.201.211/24)
#    â””â”€â”€ lc-2  (192.168.201.212/24)
#
# Network: net_local_2
#    â””â”€â”€ lc-1  (192.168.202.211/24)
#
#


# Top-level site topology configuration

# This file serves as a blueprint with options and constraints
# described within comments and shown on the example topology. 

#
site_topology_nodes:
  nodes:
    # VM node1 
    node1:
      name: lc-1  # Logical node name on the slice - required
      hostname: lc-1  # Hostname of the VM - required
      site: MAX  # FABRIC Testbed site where the node is provisioned - optional

      # Hardware specifications of the VM
      capacity:
        cpu: 4  # Number of CPU cores - required
        ram: 32  # RAM in GB - required
        disk: 100  # Disk storage in GB - required
        os: default_rocky_9  # Operating System - required

      # Persistent storage volume(s)
      persistent_storage:
        volume:
          # Volume volume1 - optional
          volume1: 
            name: FABRIC_Staff_1T # Volume name - optional
            size: 1000 # Volume size - optional

      # PCI devices connected to the node
      # All supported device types are shown below
      # All devices are optional 
      pci:
        dpu:
          dpu1:
            name: dpu1 # Logical name of the device on the slice
            model: NIC_ConnectX_7_100 # Supported types: NIC_ConnectX_7_100, NIC_ConnectX_7_400, NIC_BlueField2_ConnectX_6
            interfaces:
              iface1:
                device: eth4
                connection: conn-eth4
                binding: net_local_1
                ipv4:
                  address: 192.168.201.200/24
                  gateway: 192.168.201.1
                  dns: 8.8.8.8
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''
              iface2:
                device: eth5
                connection: conn-eth5
                binding: ''
                ipv4:
                  address: ''
                  gateway: ''
                  dns: ''
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''
        fpga:
          fpga1:
            name: fpga1 # Logical name of the device on the slice
            model: FPGA_Xilinx_U280  # Supported types: FPGA_Xilinx_U280
            interfaces:
              iface1:
                device: eth6
                connection: conn-eth6
                binding: net_local_1
                ipv4:
                  address: ''
                  gateway: ''
                  dns: ''
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''
              iface2:
                device: eth7
                connection: conn-eth7
                binding: net_local_2
                ipv4:
                  address: ''
                  gateway: ''
                  dns: ''
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''
        gpu:
          gpu1:
            name: rtx6000 # Logical name of the device on the slice
            model: GPU_RTX6000  # Supported types: GPU_RTX6000, GPU_TeslaT4, GPU_A40, GPU_A30
        nvme:
          nvme1:
            name: nvme1 # Logical name of the device on the slice
            model: NVME_P4510  # Supported types: NVME_P4510
        network:
          # First NIC with one interface (eth1)
          nic1:
            name: nic1 # Logical name of the device on the slice
            model: NIC_Basic  # Supported types: NIC_Basic, NIC_ConnectX_5, NIC_ConnectX_6
            interfaces:
              iface1:
                device: eth1 # network device name
                connection: conn-eth1 # network connection name in NetworkManager configuration
                binding: net_local_1  # connected to the network that is defined on site_topology_networks dictionary
                ipv4:
                  address: 192.168.201.211/24  # IPv4 address with subnet mask - optional
                  gateway: 192.168.201.1  # IPv4 address of the Default gateway - optional
                  dns: 8.8.8.8  # IPv4 address of the DNS server - optional
                ipv6:
                  address: '' # IPv6 address - optional
                  gateway: '' # IPv6 address of the default gateway - optional
                  dns: '' # IPv6 address of the DNS server - optional
          # Second NIC with two interfaces (eth2, eth3)
          nic2:
            name: nic2
            model: NIC_ConnectX_6
            interfaces:
              iface1:
                device: eth2
                connection: conn-eth2
                binding: net_local_2
                ipv4:
                  address: 192.168.202.211/24
                  gateway: 192.168.202.1
                  dns: 8.8.8.8
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''
              iface2:
                device: eth3
                connection: conn-eth3
                binding: ''
                ipv4:
                  address: ''
                  gateway: ''
                  dns: ''
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''

      # Custom roles - 
      # Added for a prototype OpenStack environment
      # This section will be re-visited for functionality
      specific:
        openstack:
          control: 'true'  # Acts as control plane
          network: 'true'  # Manages network services
          compute: 'false' # Not a compute node
          storage: 'true'  # Provides storage services

    # VM node2
    node2:
      name: lc-2
      hostname: lc-2
      site: MAX

      capacity:
        cpu: 2
        ram: 8
        disk: 10
        os: default_rocky_9

      persistent_storage: 
        volume: {} # No volume

      pci:
        gpu: {}  # No GPU
        nvme: {}  # No NVMe
        network:
          nic1:
            name: nic1
            model: NIC_Basic
            interfaces:
              iface1:
                device: eth1
                connection: conn-eth1
                binding: net_local_1
                ipv4:
                  address: 192.168.201.212/24
                  gateway: 192.168.201.1
                  dns: 8.8.8.8
                ipv6:
                  address: ''
                  gateway: ''
                  dns: ''

      specific:
        openstack:
          control: 'false'
          network: 'false'
          compute: 'true'  # This is a compute node
          storage: 'false'

    # VM node3
    node3:
      name: lc-3
      hostname: lc-3
      site: MAX

      capacity:
        cpu: 2
        ram: 8
        disk: 10
        os: default_rocky_9

      persistent_storage: 
        volume: {}
      
      pci:
        gpu: {}
        nvme: {}
        network: {}

      specific:
        openstack:
          control: 'false'
          network: 'false'
          compute: 'true'
          storage: 'false'

# Network definitions 
site_topology_networks:
  networks:
    net1:
      name: net_local_1 # Logical name of the network on the slice
      type: L2Bridge  # Supported types: L2Bridge, L2PTP, L2STS, IPv4, IPv6, IPv4Ext, IPv6Ext
      subnet: # Subnet configuration
        ipv4:
          address: 192.168.201.0/24
          gateway: 192.168.201.1
        ipv6:
          address: ''
          gateway: ''
    net2:
      name: net_local_2
      type: L2Bridge
      subnet:
        ipv4:
          address: 192.168.202.0/24
          gateway: 192.168.202.1
        ipv6:
          address: '2001:db8:1234:1::/64'
          gateway: '2001:db8:1234:1::1'
